<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biblioteca</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="navbar">
        <button id="toggle-theme" class="nav-btn">Alternar Tema</button>
        <a href="pesquisar-livros.html">
            <button class="nav-btn">Pesquisar Livros</button>
        </a>
    </div>

    <div class="book-grid" id="book-grid">
        <!-- Livros ser√£o carregados dinamicamente aqui -->
    </div>

    <script>
// Fun√ß√£o para criar um card de livro
function createBookCard({ id, title, author, totalPages, image, currentPage }) {
    return `
        <div class="book-card fade-in">
            <div class="book-img">
                <img src="${image}" alt="${title}">
            </div>
            <div class="book-info">
                <h4>${title}</h4>
                <p><strong>${author}</strong></p>
                <p>P√°gina atual: <span class="current-page">${currentPage}</span> / ${totalPages}</p>
                <input type="number" class="page-input" placeholder="Nova p√°gina">
                <div class="actions">
                    <button class="update-btn" data-id="${id}">Atualizar P√°gina</button>
                    <button class="remove-btn" data-id="${id}">üóëÔ∏è</button>
                </div>
            </div>
        </div>
    `;
}

// Fun√ß√£o para carregar livros do localStorage
function loadSavedBooks() {
    const savedBooks = JSON.parse(localStorage.getItem("savedBooks")) || [];
    const bookGrid = document.getElementById("book-grid");

    if (savedBooks.length === 0) {
        bookGrid.innerHTML = `<div class="empty-grid-message">Voc√™ ainda n√£o adicionou livros √† sua biblioteca.</div>`;
    } else {
        bookGrid.innerHTML = ""; // Limpa o grid antes de carregar os livros
        savedBooks.forEach(book => {
            bookGrid.insertAdjacentHTML("beforeend", createBookCard(book));
        });
    }
}

// Atualizar P√°gina Atual
document.addEventListener("click", function (e) {
    if (e.target.classList.contains("update-btn")) {
        const bookId = e.target.getAttribute("data-id"); // Obt√©m o ID do livro
        const card = e.target.closest(".book-card");
        const input = card.querySelector(".page-input");
        const currentPageDisplay = card.querySelector(".current-page");

        const newPage = parseInt(input.value, 10);
        if (!isNaN(newPage) && newPage > 0) {
            const savedBooks = JSON.parse(localStorage.getItem("savedBooks")) || [];
            const updatedBooks = savedBooks.map(book => {
                if (book.id === bookId) {
                    book.currentPage = newPage; // Atualiza a p√°gina atual
                }
                return book;
            });
            localStorage.setItem("savedBooks", JSON.stringify(updatedBooks));
            currentPageDisplay.textContent = newPage; // Atualiza o display
            input.value = ""; // Limpa o campo de entrada
        } else {
            alert("Por favor, insira um n√∫mero v√°lido.");
        }
    }
});
// Remover Livro
document.addEventListener("click", function (e) {
    if (e.target.classList.contains("remove-btn")) {
        const bookId = e.target.getAttribute("data-id"); // Obt√©m o ID do livro do bot√£o
        const confirmDelete = confirm("Tem certeza de que deseja remover este livro?");
        if (confirmDelete) {
            const savedBooks = JSON.parse(localStorage.getItem("savedBooks")) || [];
            const updatedBooks = savedBooks.filter(book => book.id !== bookId); // Filtra o livro a ser exclu√≠do
            localStorage.setItem("savedBooks", JSON.stringify(updatedBooks)); // Atualiza o localStorage
            loadSavedBooks(); // Recarrega os livros
        }
    }
});
// Alternar Tema
const toggleThemeButton = document.getElementById('toggle-theme');

function loadTheme() {
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark-mode') {
        document.body.classList.add('dark-mode');
    } else {
        document.body.classList.remove('dark-mode');
    }
}

function toggleTheme() {
    if (document.body.classList.contains('dark-mode')) {
        document.body.classList.remove('dark-mode');
        localStorage.setItem('theme', 'light-mode');
    } else {
        document.body.classList.add('dark-mode');
        localStorage.setItem('theme', 'dark-mode');
    }
}

toggleThemeButton.addEventListener('click', toggleTheme);

// Carregar os livros ao iniciar
window.onload = () => {
    loadTheme();
    loadSavedBooks();
};


    </script>
</body>
</html>
